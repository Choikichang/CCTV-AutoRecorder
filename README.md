# CameraApp (PyQt + OpenCV) 사용 매뉴얼

이 프로젝트는 **PyQt5**를 이용해 간단한 GUI를 구성하고, **OpenCV**를 통해 RTSP 카메라 스트림을 받아오는 예시 코드입니다.  
카메라에서 읽어온 영상으로 **주입(pouring) 동작** 여부를 판별하고, 특정 조건이 되면 자동으로 영상을 녹화하여 저장합니다.  
녹화 시간이 짧으면(5초 미만) 영상을 삭제해 용량 낭비를 줄이는 기능을 포함합니다.

---

## 주요 기능

1. **RTSP 카메라 스트리밍**
   - `QLineEdit`에 카메라 IP를 입력 후 **“Start Streaming”** 버튼을 누르면, 설정된 RTSP 주소를 통해 영상을 받아옵니다.
   - 예: `rtsp://admin:eugene0924!@<IP주소>/trackID=1`
2. **영상 디스플레이**
   - OpenCV 함수를 사용해, 640×360 크기의 창에 영상을 실시간으로 표시합니다.
   - ‘q’ 키를 누르면 스트리밍이 종료됩니다.
3. **주입(pouring) 동작 감지**
   - `optical_flow.py`의 `PouringDetector`를 이용해 프레임별 움직임을 분석합니다.
   - `motion_threshold=0.2`, `buffer_frames=30` 등의 파라미터를 통해 민감도와 버퍼 길이를 조정할 수 있습니다.
4. **자동 녹화 및 저장**
   - **True** 상태(주입 중)가 일정 횟수(기본 5프레임) 이상 이어지면 녹화를 시작합니다.
   - 녹화를 시작할 때, 과거 10프레임(`deque(maxlen=10)`)도 함께 영상에 포함시켜 저장합니다.
5. **녹화 중지 및 영상 삭제**
   - **False** 상태가 8프레임 이상이면 녹화를 중지합니다.
   - 녹화 시간이 5초 미만이면, 해당 영상을 바로 삭제하여 저장소를 절약합니다.
6. **Exit 버튼 (선택)**
   - GUI상에 “Exit” 버튼을 두어, 클릭하면 카메라 스트림과 모든 윈도우를 정리하고 애플리케이션을 종료할 수 있습니다.

---

## 파일 구조

```plaintext
.
├── CameraApp.py           # 본문에 해당하는 PyQt + OpenCV 통합 코드
├── optical_flow.py        # PouringDetector 클래스 정의 (주입 감지 로직)
├── README.md              # 사용 매뉴얼 (본 문서)
